<p-dialog header="Confirmation de suppression" [(visible)]="displayConfirmationDialog" [modal]="true">
    <div class="confirmation-dialog-content">
      <p>
        Êtes-vous sûr de vouloir supprimer définitivement les données supprimées ?
      </p>
    </div>
    <p-footer>
      <button pButton label="Annuler" class="p-button-secondary" (click)="displayConfirmationDialog = false"></button>
      <button pButton label="Supprimer" class="p-button-danger" (click)="confirmDeleteDeleted()"></button>
    </p-footer>
  </p-dialog>
  
  <p-toast></p-toast>
  
  <div class="container">
    <h1>Liste des infractions</h1>
    <div class="row mb-3">
      <div class="col-md-12">
        <button pButton pRipple type="button" label="Ajouter une infraction" class="p-button-primary" icon="pi pi-plus"
                style="margin-top: 3px" routerLink="/infractions/create"></button>
        <button pButton pRipple type="button" label="Restaurer les données supprimées" class="p-button-success"
                icon="pi pi-refresh" style="margin-top: 3px" (click)="confirmRestoreDeleted()"></button>
        <button pButton pRipple type="button" label="Supprimer définitivement les données supprimées"
                class="p-button-danger" icon="pi pi-trash" style="margin-top: 3px" (click)="deleteDeleted()"></button>
      </div>
    </div>
  
    <div class="row">
      <div class="col-md-12">
        <div class="table-responsive">
          <p-table #dataTableInfractions [value]="donnees" [paginator]="true" [rows]="10"
                   [showCurrentPageReport]="true" [tableStyle]="{'min-width': '50rem'}"
                   currentPageReportTemplate="Affichage de {first} à {last} sur {totalRecords} entrées"
                   [rowsPerPageOptions]="[10, 25, 50]" [globalFilterFields]="['category', 'priority']">
            <ng-template pTemplate="caption">
              <div class="flex">
                <button pButton label="Vider" class="p-button-outlined" icon="pi pi-filter-slash"
                        (click)="clear(dataTableInfractions)"></button>
                <span class="p-input-icon-left ml-auto">
                  <i class="pi pi-search"></i>
                  <input #searchInput pInputText type="text"
                         (input)="dataTableInfractions.filterGlobal(searchInput.value, 'contains')"
                         placeholder="Rechercher mot-clé"/>
                </span>
              </div>
            </ng-template>
            <ng-template pTemplate="header">
              <tr>
                <th pSortableColumn="category" style="width: 20%">Categorie<p-sortIcon field="category"></p-sortIcon></th>
                <th pSortableColumn="priority" style="width: 20%">Priorité<p-sortIcon field="priority"></p-sortIcon></th>
                <th>Liste</th>
                <th>Actions</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-donnee>
              <tr>
                <td>{{ donnee.category }}</td>
                <td>{{ donnee.priority }}</td>
                <td>
                  <table class="table table-bordered">
                    <tr *ngFor="let item of donnee.list; let i = index">
                      <td>{{ item[0] }}</td>
                      <td>{{ item[1] }}</td>
                    </tr>
                  </table>
                </td>
                <td>
                  <button pButton pRipple icon="pi pi-pencil"
                          class="p-button-rounded p-button-success mx-2"
                          [routerLink]="['/infractions', donnee._id]"></button>
                  <button pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-warning"
                          (click)="deleteDonnee(donnee._id)"></button>
                </td>
              </tr>
            </ng-template>
            <ng-template pTemplate="paginatorleft">
              <p-button type="button" icon="pi pi-plus" styleClass="p-button-text"
                        routerLink="/infractions/create"></p-button>
            </ng-template>
          </p-table>
        </div>
      </div>
    </div>
  </div>
  